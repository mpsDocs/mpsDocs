<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TemplateDeclarationWeavingAware2 (MPS.Core (JetBrains MPS 2020.1.6))</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TemplateDeclarationWeavingAware2 (MPS.Core (JetBrains MPS 2020.1.6))";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":18,"i1":50};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],16:["t5","Default Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">jetbrains.mps.generator.runtime</a></div>
<h2 title="Interface TemplateDeclarationWeavingAware2" class="title">Interface TemplateDeclarationWeavingAware2</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="TemplateDeclaration.html" title="interface in jetbrains.mps.generator.runtime">TemplateDeclaration</a></code></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="TemplateDeclarationBase.html" title="class in jetbrains.mps.generator.runtime">TemplateDeclarationBase</a></code>, <code><a href="../impl/interpreted/TemplateDeclarationInterpreted.html" title="class in jetbrains.mps.generator.impl.interpreted">TemplateDeclarationInterpreted</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">TemplateDeclarationWeavingAware2</span></pre>
<div class="block">This is provisional interface to migrate from uses of <code>TemplateDeclarationWeavingAware</code> to
 <a href="TemplateDeclaration.html" title="interface in jetbrains.mps.generator.runtime"><code>TemplateDeclaration</code></a>. Denoted @ToRemove as this interface shall become integral part of <code>TemplateDeclaration</code> (if survives).

 IMPLEMENTATION NOTE:
 For unknown reason, interpreted templates were not <code>TemplateDeclarationWeavingAware</code>, thus, a call from generated code to interpreted template
 would fail with CCE in TEEI#weaveTemplate(). For that reason, I don't implement <code>TemplateDeclarationWeavingAware2</code> for interpreted templates, too.
 I'd need to refactor generated templates and TEE first.
 FWIW, <code>TemplateDeclarationWeavingAware</code> used to extend <code>TemplateDeclaration</code>

 DESIGN NOTE:
 The only reason this interface is standalone, and not part of <code>TemplateDeclaration</code> right away is that I hope to drop TF.contextNodeQuery
 and there would be no need to handle <code>weave()</code> in any different way than <code>apply()</code>. Functional approach is better for generator,
 and TF.contextNodeQuery has only 2 uses throughout whole MPS. It might be reasonable to do it other way round and to support TF.contextNodeQuery
 for any templates (not only under weaving). Anyway, template handling shall be identical for weave and apply cases.

 Provisional nature of the interface is the reason I left WeaveContext parameter here (although strove to get WC hidden, and only NWF exposed).
 Since the method was exposed in few EAP builds, I'd need to introduce a new one, keep both for at least RC round, and then remove the one with
 two arguments. As long as TF.contextNodeQuery is history, there would be no reason to have WC there (we use it to get original context node for
 template fragment query context), and there's no need in this interface at all.

 DESIGN NOTE 2:
 FWIW, return value of weave() is not really in use. WeavingRule uses it to return true from apply() if there's anything in the collection
   however, this value is ignored in WeavingProcessor. When designing a replacement API, consider functional approach when a TD class
   merely creates a nodes but doesn't inject them (it's what TD.apply() does, and what weave() DOES NOT). Would be great to combine both
   apply and weave() so that we don't need to distinguish between the two, see <a href="FragmentResult.html" title="class in jetbrains.mps.generator.runtime"><code>FragmentResult</code></a>. OTOH, use of FragmentResult
   (or anything more complicated, like a container for FragmentResult that in addition holds e.g. apply status) makes code too complicated,
   especially in case of generated templates that may iterate collection right away and inject nodes as needed, instead of going
   hard (yet nice) way of FragmentResult.addTo(parent).
   Alternative is to have apply(ApplySink), where ApplySink knows whether it's weave or regular apply(), keeps parent and containment
   However, for generated code there likely to be a lot of ApplyContext instantiations. Can I pass it further (e.g to CALL)? Shall it
   keep TemplateContext or it is to be separate? What I like is that ApplySink hides child checking logic.
   Besides, it's easy to migrate apply():Collection to apply(ApplySink):void. Need to figure out how to approach weave then
   (for generated templates, there's no weave for interpreted). In generated, is it any trouble, provided existing generated would
   mostly likely work as they don't 'weave' foreign templates (for local old code would work fine). What if they do invoke foreign,
   is there's a chance to have graceful transition path?</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.3</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>default <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;<a href="../../../../org/jetbrains/mps/openapi/model/SNode.html" title="interface in org.jetbrains.mps.openapi.model">SNode</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#weave(jetbrains.mps.generator.runtime.NodeWeaveFacility)">weave</a></span>&#8203;(<a href="NodeWeaveFacility.html" title="interface in jetbrains.mps.generator.runtime">NodeWeaveFacility</a>&nbsp;weaveFacility)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;<a href="../../../../org/jetbrains/mps/openapi/model/SNode.html" title="interface in org.jetbrains.mps.openapi.model">SNode</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#weave(jetbrains.mps.generator.runtime.NodeWeaveFacility.WeaveContext,jetbrains.mps.generator.runtime.NodeWeaveFacility)">weave</a></span>&#8203;(<a href="NodeWeaveFacility.WeaveContext.html" title="interface in jetbrains.mps.generator.runtime">NodeWeaveFacility.WeaveContext</a>&nbsp;context,
     <a href="NodeWeaveFacility.html" title="interface in jetbrains.mps.generator.runtime">NodeWeaveFacility</a>&nbsp;weaveFacility)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span></div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="weave(jetbrains.mps.generator.runtime.NodeWeaveFacility.WeaveContext,jetbrains.mps.generator.runtime.NodeWeaveFacility)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>weave</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
default&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;<a href="../../../../org/jetbrains/mps/openapi/model/SNode.html" title="interface in org.jetbrains.mps.openapi.model">SNode</a>&gt;&nbsp;weave&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                                <a href="NodeWeaveFacility.WeaveContext.html" title="interface in jetbrains.mps.generator.runtime">NodeWeaveFacility.WeaveContext</a>&nbsp;context,
                                <a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                                <a href="NodeWeaveFacility.html" title="interface in jetbrains.mps.generator.runtime">NodeWeaveFacility</a>&nbsp;weaveFacility)
                         throws <a href="GenerationException.html" title="class in jetbrains.mps.generator.runtime">GenerationException</a></pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="GenerationException.html" title="class in jetbrains.mps.generator.runtime">GenerationException</a></code></dd>
</dl>
</li>
</ul>
<a id="weave(jetbrains.mps.generator.runtime.NodeWeaveFacility)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>weave</h4>
<pre class="methodSignature">default&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;<a href="../../../../org/jetbrains/mps/openapi/model/SNode.html" title="interface in org.jetbrains.mps.openapi.model">SNode</a>&gt;&nbsp;weave&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                                <a href="NodeWeaveFacility.html" title="interface in jetbrains.mps.generator.runtime">NodeWeaveFacility</a>&nbsp;weaveFacility)
                         throws <a href="GenerationException.html" title="class in jetbrains.mps.generator.runtime">GenerationException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="GenerationException.html" title="class in jetbrains.mps.generator.runtime">GenerationException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
