<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ClassLoaderManager (MPS.Core (JetBrains MPS 2020.3.4))</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ClassLoaderManager (MPS.Core (JetBrains MPS 2020.3.4))";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":42,"i3":10,"i4":41,"i5":10,"i6":10,"i7":10,"i8":9,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">jetbrains.mps.classloading</a></div>
<h2 title="Class ClassLoaderManager" class="title">Class ClassLoaderManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>jetbrains.mps.classloading.ClassLoaderManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../components/CoreComponent.html" title="interface in jetbrains.mps.components">CoreComponent</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">ClassLoaderManager</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>
implements <a href="../components/CoreComponent.html" title="interface in jetbrains.mps.components">CoreComponent</a></pre>
<div class="block">A ClassLoaderManager is a singleton and provides an internal API for loading classes
 within MPS.
 NOTE: External API is placed in <a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module"><code>ReloadableModule</code></a> interface.
 Using the methods of this class is not recommended.

 In order to get Class from a module call <a href="#getClass(org.jetbrains.mps.openapi.module.SModule,java.lang.String)"><code>getClass(org.jetbrains.mps.openapi.module.SModule, java.lang.String)</code></a> method.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#myLoadableCondition"><code>General information:
 A MPS java module is loadable iff it is possible to associate some ClassLoader with it.
 Currently there are two types of loadable modules:
 1. Reloadable modules are modules which ClassLoader maybe redeployed on-the-fly</code></a>, 
<a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module"><code>ReloadableModule</code></a>, 
<a href="#myMPSLoadableCondition"><code>Presently the associated ClassLoader for these modules is .
 ClassLoaderManager stores a map of this ClassLoader instances, reloads them if needed, delegates class requests to them.
 2. Non-reloadable modules are not reloadable modules.
 Currently such modules are bundled with Idea plugin, the associated ClassLoader for these modules is the result
 of the method  call.
 CLManager delegates Class/ClassLoader requests to Idea plugin [for these modules].

 Common part
 CLManager listens to newly added loadable modules (into the repository) and to modules' removal.
 When module is added, CLManager marks it as () and broadcasts the event to
  clients.
 When module's classes (or ClassLoader) are requested, the actual module load happens.
 When module is removed from the repository, CLManager unloaded module's data from its' storage.</code></a>, 
<a href="ClassLoadersHolder.ClassLoadingProgress.html" title="enum in jetbrains.mps.classloading"><code>for more information on module's loading progress and module's lifecycle

 Every module add/remove/reload triggers events dispatching to MPSClassesListeners</code></a>, 
<a href="DeployListener.html" title="interface in jetbrains.mps.classloading"><code>Also CLManager tracks the validity of the repository modules.
 The invariant condition is that a module can not be (class) loaded if any of its dependencies is absent in the repository.
 That means that for an invalid module CLManager will return null for all Class/ClassLoader requests (#getClass, #getClassLoader)</code></a>, 
<a href="ModulesWatcher.html" title="class in jetbrains.mps.classloading"><code>ModulesWatcher</code></a>, 
<a href="ModulesWatcher.ClassLoadingStatus.html" title="interface in jetbrains.mps.classloading"><code>ModulesWatcher.ClassLoadingStatus</code></a>, 
<a href="ModulesWatcher.html#getStatus(org.jetbrains.mps.openapi.module.SModuleReference)"><code>Reloadable part
 Any reloadable module M has a class loading lifecycle like this:
 # module M is added to the repository [no ModuleClassLoader created]
 # someone reloads M or asks for the classloader of M - initializing ModuleClassLoader creation for M (lazy load) [ModuleClassLoader is constructed]
 # more M reloads and class requests
 # module M is removed from the repository - ModuleClassLoader gets disposed. [ModuleClassLoader removed]

 Reload may be triggered by a client explicitly with .
 [**] Notice that it is a very uncommon case when you might need an explicit reload.
 Currently a module's reload happens automatically on module's changes (some specific changes, details below).</code></a>, 
<a href="BatchEventsProcessor.html" title="class in jetbrains.mps.classloading"><code>for details

 CLManager exploits a lazy mechanism of module's reloading. It stacks all module events,
 and occasionally refresh happens: CLM flushes them and processes all the accumulated events.
 When CLManager refreshes, its state becomes actual. [in the sense of information about modules', their class loading status and their ClassLoader's]
 The state is guaranteed to be actual at these points:
 1. Right after the end of write action [CLManager has a ]
 2. In the middle of write action if a Class or ClassLoader was requested [].
     Only write action holder is able to provoke refresh [!]
 3. Explicit reload: a call of reload methods [, ].</code></a>, 
<a href="#getClassLoader(org.jetbrains.mps.openapi.module.SModule)"><code>documentation for more details on pt. 2</code></a>, 
<a href="#refresh()"><code>Repository lock policy
 Every reload requires a repository write lock. Actual ModuleClassLoader construction happens inside the read action,</code></a>, 
<a href="#doLoadModules(java.lang.Iterable,org.jetbrains.mps.openapi.util.ProgressMonitor)"><code>FIXME logic here must be rewritten in a more abstract way to allow both lazy and non-lazy implementations
 FIXME the module dependency tracking must be isolated from the class loading logic
 FIXME here we give no guarantees when we give out ClassLoader (#getClassLoader) that it will be valid the next moment.
  We need to introduce some kind of write/read actions for that matter

 TODO the workflow between ModuleEventsHandler, ClassLoaderManager and ModulesWatcher is too complicated and impossible to perceive, it needs to be done over again
 TODO As for 23.01.19 the refactoring is planned for the 202 version, where the reloadable modules will be equipped with persisted cp.

  THE PLAN for the future
  updates (#reload, #unload, #load):

  The dependency graph is updated at the special moments under some lock (now it is updated upon request and in the end of each write action)
  This operation is assumed not to happen too often.

  Each module has a loaded/unloaded status and that one is updated only upon request (explicit invocation of #reload) and requests a write* action.
   (write* is the lock guarding the module classes, write is the lock guarding the modules/models repository (where we do not need any classes)).
  We have generations of classloaders, each classloader remembers his generation token, also it has disposed/not-disposed state.

  Each module has an API-available state (deployed/not-deployed), it is possible to deploy/undeploy the module directly, but it can fail due to reasons which are passed
   to the caller.

  queries:

  The graph with deps is queried when needed by CLM and by external clients. It must be done under the same lock as above.

  Each module has an API-available state (valid/not-valid). The lock is the same as with the graph.

  Since there is no easy way to track all the instances of the given class,
   #getClassLoader now gets the second parameter of ReloadTracker which is essentially the listener which is invoked on #reloads (like 
   and is obliged to recreate all the instances of dynamic classes he has hard references too (for example, stores them in the map).
   When the client decides that he does not need the old ModuleClassLoader to exist, he invokes callback#release (if the client's workflow is asynchronous)

  In order to guarantee for a piece of code to be executed on the same generation of ModuleClassLoaders (which is not always the case, I believe),
   the client has to take read* lock.

  Each ModuleClassLoader will depend only on ModuleClassLoaders from the same generation (currently that is not true).

  From each generation token it will be possible to extract information about the specific #reload operation that happenned.

  We catch ClassCastExceptions somewhere to dump every detail we have on two different ModuleClassLoaders which clashed
  Also we catch any problems from extensions and switch them off like IJ does.</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.jetbrains.mps.openapi.module.SRepository)">ClassLoaderManager</a></span>&#8203;(<a href="../../../org/jetbrains/mps/openapi/module/SRepository.html" title="interface in org.jetbrains.mps.openapi.module">SRepository</a>&nbsp;repository)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addListener(jetbrains.mps.classloading.DeployListener)">addListener</a></span>&#8203;(<a href="DeployListener.html" title="interface in jetbrains.mps.classloading">DeployListener</a>&nbsp;listener)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dispose()">dispose</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getClass(org.jetbrains.mps.openapi.module.SModule,java.lang.String)">getClass</a></span>&#8203;(<a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&nbsp;module,
        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;classFqName)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use module-specific methods which throw different ClassNotFoundExceptions,
 you need to process it on your own (probably show some user notification)</div>
</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="MPSModuleClassLoader.html" title="class in jetbrains.mps.classloading">MPSModuleClassLoader</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getClassLoader(org.jetbrains.mps.openapi.module.SModule)">getClassLoader</a></span>&#8203;(<a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&nbsp;module)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="ClassLoaderManager.html" title="class in jetbrains.mps.classloading">ClassLoaderManager</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInstance()">getInstance</a></span>()</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="../components/ComponentHost.html#findComponent(java.lang.Class)"><code>ComponentHost#findComponent(ClassLoaderManager.class)</code></a> instead</div>
</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../module/ReloadableModule.DeploymentStatus.html" title="interface in jetbrains.mps.module">ReloadableModule.DeploymentStatus</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStatus(jetbrains.mps.module.ReloadableModule)">getStatus</a></span>&#8203;(<a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module">ReloadableModule</a>&nbsp;module)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#init()">init</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isLoadedByMPS(jetbrains.mps.module.ReloadableModule)">isLoadedByMPS</a></span>&#8203;(<a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module">ReloadableModule</a>&nbsp;module)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reload(java.util.List)">reload</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&gt;&nbsp;modules)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reloadAll(org.jetbrains.mps.openapi.util.ProgressMonitor)">reloadAll</a></span>&#8203;(<a href="../../../org/jetbrains/mps/openapi/util/ProgressMonitor.html" title="interface in org.jetbrains.mps.openapi.util">ProgressMonitor</a>&nbsp;monitor)</code></th>
<td class="colLast">
<div class="block">Note: usually reloading only the "dirty" modules is enough.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reloadModule(org.jetbrains.mps.openapi.module.SModule)">reloadModule</a></span>&#8203;(<a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&nbsp;module)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reloadModules(java.lang.Iterable)">reloadModules</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;? extends <a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&gt;&nbsp;modules)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reloadModules(java.lang.Iterable,org.jetbrains.mps.openapi.util.ProgressMonitor)">reloadModules</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;? extends <a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&gt;&nbsp;modules,
             <a href="../../../org/jetbrains/mps/openapi/util/ProgressMonitor.html" title="interface in org.jetbrains.mps.openapi.util">ProgressMonitor</a>&nbsp;monitor)</code></th>
<td class="colLast">
<div class="block">Use this method to invalidate modules (namely, recreate their class loaders)
 There are also useful <a href="#reloadModules(java.lang.Iterable)"><code>reloadModules(Iterable)</code></a> and <a href="#reloadModule(org.jetbrains.mps.openapi.module.SModule)"><code>reloadModule(SModule)</code></a>.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeListener(jetbrains.mps.classloading.DeployListener)">removeListener</a></span>&#8203;(<a href="DeployListener.html" title="interface in jetbrains.mps.classloading">DeployListener</a>&nbsp;listener)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#runNonReloadableSection(java.lang.Runnable)">runNonReloadableSection</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Runnable</a>&nbsp;runnable)</code></th>
<td class="colLast">
<div class="block">no events are triggered, classloaders do not change during this section</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#runTransaction(java.lang.Runnable)">runTransaction</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Runnable</a>&nbsp;transaction)</code></th>
<td class="colLast">
<div class="block">the caller is guaranteed that no reload happen during the transaction (reload which is coming from the other thread)
 due to possible deadlock at least the read access is demanded</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.jetbrains.mps.openapi.module.SRepository)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ClassLoaderManager</h4>
<pre>public&nbsp;ClassLoaderManager&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                          <a href="../../../org/jetbrains/mps/openapi/module/SRepository.html" title="interface in org.jetbrains.mps.openapi.module">SRepository</a>&nbsp;repository)</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getInstance()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
public static&nbsp;<a href="ClassLoaderManager.html" title="class in jetbrains.mps.classloading">ClassLoaderManager</a>&nbsp;getInstance()</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use <a href="../components/ComponentHost.html#findComponent(java.lang.Class)"><code>ComponentHost#findComponent(ClassLoaderManager.class)</code></a> instead</div>
</div>
</li>
</ul>
<a id="init()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;init()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../components/CoreComponent.html#init()">init</a></code>&nbsp;in interface&nbsp;<code><a href="../components/CoreComponent.html" title="interface in jetbrains.mps.components">CoreComponent</a></code></dd>
</dl>
</li>
</ul>
<a id="dispose()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispose</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;dispose()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../components/CoreComponent.html#dispose()">dispose</a></code>&nbsp;in interface&nbsp;<code><a href="../components/CoreComponent.html" title="interface in jetbrains.mps.components">CoreComponent</a></code></dd>
</dl>
</li>
</ul>
<a id="getClass(org.jetbrains.mps.openapi.module.SModule,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClass</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/Nullable.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@Nullable</a>
public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang" class="externalLink">Class</a>&lt;?&gt;&nbsp;getClass&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                         <a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&nbsp;module,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;classFqName)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">use module-specific methods which throw different ClassNotFoundExceptions,
 you need to process it on your own (probably show some user notification)</div>
</div>
<div class="block">TODO refactor all usages of getClass()
 Contract: @param module must be loadable (<a href="#myLoadableCondition"><code>myLoadableCondition</code></a>
 So if  method returns true and the class file is in place you will get the class</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module"><code>ReloadableModule</code></a>, 
<a href="ModuleIsNotLoadableException.html" title="class in jetbrains.mps.classloading"><code>ModuleIsNotLoadableException</code></a>, 
<a href="ModuleClassNotFoundException.html" title="class in jetbrains.mps.classloading"><code>ModuleClassNotFoundException</code></a></dd>
</dl>
</li>
</ul>
<a id="getClassLoader(org.jetbrains.mps.openapi.module.SModule)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClassLoader</h4>
<pre class="methodSignature"><a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
public&nbsp;<a href="MPSModuleClassLoader.html" title="class in jetbrains.mps.classloading">MPSModuleClassLoader</a>&nbsp;getClassLoader&#8203;(<a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&nbsp;module)</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the class loader associated with the module. Note that sometimes it may return "outdated" ClassLoader.
 To be exact it returns the classloader for module, which was actual for the moment of last refresh event.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#refresh()"><code>Refresh happens at these points:
 1. At the end of write action,
 2. During #getClassLoader calls inside the write action,
 3. Also it may be triggered explicitly by #reloadModules(), #reloadModule(), etc. call.

 This method can return the class loader of the IDEA plugin which manages the module's classes.
 Use it if you want to get a class from the module with IdeaPluginFacet.

 INTERNAL USE ONLY: use module-specific methods which throw ClassNotFoundException,
 you need to process it by yourself (probably show some user notification)</code></a>, 
<a href="ModuleIsNotLoadableException.html" title="class in jetbrains.mps.classloading"><code>ModuleIsNotLoadableException</code></a>, 
<a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module"><code>ReloadableModule</code></a></dd>
</dl>
</li>
</ul>
<a id="runTransaction(java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runTransaction</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;runTransaction&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Runnable</a>&nbsp;transaction)</pre>
<div class="block">the caller is guaranteed that no reload happen during the transaction (reload which is coming from the other thread)
 due to possible deadlock at least the read access is demanded</div>
</li>
</ul>
<a id="runNonReloadableSection(java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runNonReloadableSection</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;runNonReloadableSection&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Runnable</a>&nbsp;runnable)</pre>
<div class="block">no events are triggered, classloaders do not change during this section</div>
</li>
</ul>
<a id="addListener(jetbrains.mps.classloading.DeployListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addListener&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                        <a href="DeployListener.html" title="interface in jetbrains.mps.classloading">DeployListener</a>&nbsp;listener)</pre>
</li>
</ul>
<a id="removeListener(jetbrains.mps.classloading.DeployListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;removeListener&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                           <a href="DeployListener.html" title="interface in jetbrains.mps.classloading">DeployListener</a>&nbsp;listener)</pre>
</li>
</ul>
<a id="reloadModules(java.lang.Iterable,org.jetbrains.mps.openapi.util.ProgressMonitor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reloadModules</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;reloadModules&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;? extends <a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&gt;&nbsp;modules,
                          <a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                          <a href="../../../org/jetbrains/mps/openapi/util/ProgressMonitor.html" title="interface in org.jetbrains.mps.openapi.util">ProgressMonitor</a>&nbsp;monitor)</pre>
<div class="block">Use this method to invalidate modules (namely, recreate their class loaders)
 There are also useful <a href="#reloadModules(java.lang.Iterable)"><code>reloadModules(Iterable)</code></a> and <a href="#reloadModule(org.jetbrains.mps.openapi.module.SModule)"><code>reloadModule(SModule)</code></a>.</div>
</li>
</ul>
<a id="reload(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reload</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;reload&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&gt;&nbsp;modules)</pre>
</li>
</ul>
<a id="reloadModules(java.lang.Iterable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reloadModules</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;reloadModules&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang" class="externalLink">Iterable</a>&lt;? extends <a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&gt;&nbsp;modules)</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#reloadModules(java.lang.Iterable,org.jetbrains.mps.openapi.util.ProgressMonitor)"><code>reloadModules(Iterable, org.jetbrains.mps.openapi.util.ProgressMonitor)</code></a></dd>
</dl>
</li>
</ul>
<a id="reloadModule(org.jetbrains.mps.openapi.module.SModule)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reloadModule</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;reloadModule&#8203;(<a href="../../../org/jetbrains/mps/openapi/module/SModule.html" title="interface in org.jetbrains.mps.openapi.module">SModule</a>&nbsp;module)</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module"><code>ReloadableModule</code></a></dd>
</dl>
</li>
</ul>
<a id="reloadAll(org.jetbrains.mps.openapi.util.ProgressMonitor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reloadAll</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;reloadAll&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                      <a href="../../../org/jetbrains/mps/openapi/util/ProgressMonitor.html" title="interface in org.jetbrains.mps.openapi.util">ProgressMonitor</a>&nbsp;monitor)</pre>
<div class="block">Note: usually reloading only the "dirty" modules is enough.
 Please take a look at <a href="#reloadModule(org.jetbrains.mps.openapi.module.SModule)"><code>reloadModule(org.jetbrains.mps.openapi.module.SModule)</code></a> and <a href="#reloadModules(java.lang.Iterable,org.jetbrains.mps.openapi.util.ProgressMonitor)"><code>reloadModules(java.lang.Iterable&lt;? extends org.jetbrains.mps.openapi.module.SModule&gt;, org.jetbrains.mps.openapi.util.ProgressMonitor)</code></a> methods.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#reloadModules(java.lang.Iterable,org.jetbrains.mps.openapi.util.ProgressMonitor)"><code>reloadModules(Iterable, org.jetbrains.mps.openapi.util.ProgressMonitor)</code></a></dd>
</dl>
</li>
</ul>
<a id="getStatus(jetbrains.mps.module.ReloadableModule)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatus</h4>
<pre class="methodSignature"><a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
public&nbsp;<a href="../module/ReloadableModule.DeploymentStatus.html" title="interface in jetbrains.mps.module">ReloadableModule.DeploymentStatus</a>&nbsp;getStatus&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                                                   <a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module">ReloadableModule</a>&nbsp;module)</pre>
</li>
</ul>
<a id="isLoadedByMPS(jetbrains.mps.module.ReloadableModule)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isLoadedByMPS</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isLoadedByMPS&#8203;(<a href="https://javadoc.io/doc/org.jetbrains/annotations/latest/org/jetbrains/annotations/NotNull.html?is-external=true" title="class or interface in org.jetbrains.annotations" class="externalLink">@NotNull</a>
                             <a href="../module/ReloadableModule.html" title="interface in jetbrains.mps.module">ReloadableModule</a>&nbsp;module)</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
